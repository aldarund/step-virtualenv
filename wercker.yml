box: wercker/default
build:
  steps:
    - validate-wercker-step
    - script:
        name: Run tests
        code: ./script/spec
  after-steps:
    - script:
        name: Test virtual env 1
        code: |
            export WERCKER_VIRTUALENV_PYTHON_PATH="/usr/bin/python2.7"
            export WERCKER_VIRTUALENV_VIRTUALENV_LOCATION="~/venv"
            export WERCKER_VIRTUALENV_INSTALL_WHEEL="true"
            export WERCKER_CACHE_DIR="/tmp"
            source ./run.sh
            pip freeze
   - script:
        name: Test virtual env 2
        code: |
            export WERCKER_VIRTUALENV_PYTHON_PATH="/usr/bin/python3.2"
            export WERCKER_VIRTUALENV_VIRTUALENV_LOCATION="~/venv32"
            export WERCKER_VIRTUALENV_INSTALL_WHEEL="true"
            export WERCKER_CACHE_DIR="/tmp"
            source ./run.sh
            pip freeze